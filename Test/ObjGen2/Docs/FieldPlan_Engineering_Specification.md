# FieldPlan XML File Engineering Specification

## Document Information
- **Document Title**: FieldPlan XML File Engineering Specification
- **Version**: 1.0
- **Date**: 2024
- **Purpose**: Defines the structure, content, and meaning of .fieldplan XML files generated by the Field Leveller application

## 1. Overview

The .fieldplan file is an XML-based engineering specification document that contains comprehensive operational data for field leveling operations. It provides detailed information about equipment specifications, spatial binning data, and optimized trip sequences for earthmoving equipment.

## 2. File Structure

The .fieldplan file follows a hierarchical XML structure with the following main sections:

```
<FieldPlan>
  <Equipment>...</Equipment>
  <Bins>...</Bins>
  <Trips>...</Trips>
</FieldPlan>
```

## 3. Equipment Section

### 3.1 Purpose
Defines the equipment specifications and operational parameters used for field leveling calculations.

### 3.2 Structure
```xml
<Equipment>
  <SoilSwell>1.30</SoilSwell>
  <SoilShrink>0.64</SoilShrink>
  <EquipmentLoadLCY>20.0</EquipmentLoadLCY>
  <CuttingWidthFt>15.0</CuttingWidthFt>
  <CuttingWidthM>4.572</CuttingWidthM>
  <MaxCutDepthM>0.06096</MaxCutDepthM>
  <MaxLooseDepositInches>6.0</MaxLooseDepositInches>
  <MaxLooseDepositM>0.1524</MaxLooseDepositM>
  <FieldEfficiency>0.80</FieldEfficiency>
  <SpeedModel>
    <VLoadMs>1.788</VLoadMs>
    <VHaulMs>2.772</VHaulMs>
    <VEmptyMs>2.953</VEmptyMs>
    <VDumpMs>2.235</VDumpMs>
  </SpeedModel>
</Equipment>
```

### 3.3 Field Definitions

| Field | Unit | Description |
|-------|------|-------------|
| `SoilSwell` | ratio | Soil expansion factor when excavated (1.30 = 30% expansion) |
| `SoilShrink` | ratio | Soil compaction factor when deposited (0.64 = 36% compaction) |
| `EquipmentLoadLCY` | LCY | Equipment load capacity in loose cubic yards |
| `CuttingWidthFt` | feet | Equipment cutting width in feet |
| `CuttingWidthM` | meters | Equipment cutting width in meters |
| `MaxCutDepthM` | meters | Maximum allowable cut depth per pass |
| `MaxLooseDepositInches` | inches | Maximum loose material deposit thickness |
| `MaxLooseDepositM` | meters | Maximum loose material deposit thickness |
| `FieldEfficiency` | ratio | Field efficiency factor (0.80 = 80% efficiency) |
| `VLoadMs` | m/s | Equipment speed during loading operations |
| `VHaulMs` | m/s | Equipment speed during hauling operations |
| `VEmptyMs` | m/s | Equipment speed during empty return |
| `VDumpMs` | m/s | Equipment speed during dumping operations |

## 4. Bins Section

### 4.1 Purpose
Defines the spatial grid system used for field analysis and provides lookup tables for coordinate mapping.

### 4.2 Structure
```xml
<Bins>
  <BinSizeM>0.6096</BinSizeM>
  <BinDimensions>
    <Width>50</Width>
    <Height>30</Height>
    <TotalBins>1500</TotalBins>
  </BinDimensions>
  <FieldBounds>
    <MinLatitude>36.447671</MinLatitude>
    <MaxLatitude>36.449451</MaxLatitude>
    <MinLongitude>-90.720725</MinLongitude>
    <MaxLongitude>-90.720099</MaxLongitude>
  </FieldBounds>
  <BinTable>
    <Bin>
      <IndexX>0</IndexX>
      <IndexY>0</IndexY>
      <SouthwestCorner>
        <Latitude>36.447671</Latitude>
        <Longitude>-90.720725</Longitude>
      </SouthwestCorner>
      <NortheastCorner>
        <Latitude>36.447672</Latitude>
        <Longitude>-90.720724</Longitude>
      </NortheastCorner>
      <Centroid>
        <Latitude>36.447671</Latitude>
        <Longitude>-90.720724</Longitude>
      </Centroid>
      <CutFillAmountM>0.060960</CutFillAmountM>
      <ExistingElevationM>125.450</ExistingElevationM>
    </Bin>
  </BinTable>
</Bins>
```

### 4.3 Field Definitions

| Field | Unit | Description |
|-------|------|-------------|
| `BinSizeM` | meters | Size of each bin (0.6096m = 2ft x 2ft) |
| `Width` | count | Number of bins in X direction |
| `Height` | count | Number of bins in Y direction |
| `TotalBins` | count | Total number of bins in the field |
| `MinLatitude` | degrees | Southern boundary of the field |
| `MaxLatitude` | degrees | Northern boundary of the field |
| `MinLongitude` | degrees | Western boundary of the field |
| `MaxLongitude` | degrees | Eastern boundary of the field |
| `IndexX` | index | X-coordinate index of the bin |
| `IndexY` | index | Y-coordinate index of the bin |
| `SouthwestCorner` | lat/lon | Southwest corner coordinates of the bin |
| `NortheastCorner` | lat/lon | Northeast corner coordinates of the bin |
| `Centroid` | lat/lon | Center point coordinates of the bin |
| `CutFillAmountM` | meters | Net cut/fill amount for this bin (positive = cut, negative = fill) |
| `ExistingElevationM` | meters | Original ground elevation at this bin |

## 5. Trips Section

### 5.1 Purpose
Contains the optimized sequence of earthmoving trips with detailed operational parameters.

### 5.2 Structure
```xml
<Trips>
  <Trip>
    <TripIndex>1</TripIndex>
    <StartCoordinates>
      <Latitude>36.447671</Latitude>
      <Longitude>-90.720099</Longitude>
    </StartCoordinates>
    <EndCoordinates>
      <Latitude>36.449451</Latitude>
      <Longitude>-90.720680</Longitude>
    </EndCoordinates>
    <Cut>
      <Coordinates>...</Coordinates>
      <DepthM>0.061</DepthM>
      <LengthM>102.000</LengthM>
      <HeadingDeg>104.7</HeadingDeg>
      <Profile>...</Profile>
      <Bins>...</Bins>
    </Cut>
    <Fill>
      <Coordinates>...</Coordinates>
      <DepthM>0.023</DepthM>
      <LengthM>102.000</LengthM>
      <HeadingDeg>284.7</HeadingDeg>
      <Profile>...</Profile>
      <Bins>...</Bins>
    </Fill>
    <Metrics>
      <BCY>16.584</BCY>
      <DistanceM>204.714</DistanceM>
      <TripTimeSeconds>120.5</TripTimeSeconds>
      <TotalDistanceM>204.714</TotalDistanceM>
      <TotalCutBins>3</TotalCutBins>
      <TotalFillBins>3</TotalFillBins>
    </Metrics>
  </Trip>
</Trips>
```

### 5.3 Trip-Level Fields

| Field | Unit | Description |
|-------|------|-------------|
| `TripIndex` | count | Sequential trip number (1, 2, 3, ...) |
| `StartCoordinates` | lat/lon | Trip starting position |
| `EndCoordinates` | lat/lon | Trip ending position |

### 5.4 Cut Section Fields

| Field | Unit | Description |
|-------|------|-------------|
| `StartLatitude` | degrees | Cut operation start latitude |
| `StartLongitude` | degrees | Cut operation start longitude |
| `StopLatitude` | degrees | Cut operation stop latitude |
| `StopLongitude` | degrees | Cut operation stop longitude |
| `DepthM` | meters | Average cut depth |
| `LengthM` | meters | Cut operation length |
| `HeadingDeg` | degrees | Cut operation heading (0-360°) |

### 5.5 Fill Section Fields

| Field | Unit | Description |
|-------|------|-------------|
| `StartLatitude` | degrees | Fill operation start latitude |
| `StartLongitude` | degrees | Fill operation start longitude |
| `StopLatitude` | degrees | Fill operation stop latitude |
| `StopLongitude` | degrees | Fill operation stop longitude |
| `DepthM` | meters | Average fill depth |
| `LengthM` | meters | Fill operation length |
| `HeadingDeg` | degrees | Fill operation heading (0-360°) |

### 5.6 Profile Structure
```xml
<Profile>
  <ProfileEntry>
    <DistanceM>0.0</DistanceM>
    <DepthM>0.060960</DepthM>
  </ProfileEntry>
  <ProfileEntry>
    <DistanceM>0.5</DistanceM>
    <DepthM>0.060960</DepthM>
  </ProfileEntry>
</Profile>
```

**Profile Fields:**
- `DistanceM`: Distance along the operation path (meters)
- `DepthM`: Depth/height at that distance (meters)

### 5.7 Bin Operations Structure
```xml
<Bins>
  <Bin>
    <IndexX>10</IndexX>
    <IndexY>15</IndexY>
    <CutAmountM>0.060960</CutAmountM>
    <HeadingDeg>104.7</HeadingDeg>
  </Bin>
</Bins>
```

**Bin Operation Fields:**
- `IndexX`: X-coordinate index of the bin
- `IndexY`: Y-coordinate index of the bin
- `CutAmountM`/`FillAmountM`: Amount of material to cut/fill from this bin
- `HeadingDeg`: Direction from this bin to the destination

### 5.8 Metrics Fields

| Field | Unit | Description |
|-------|------|-------------|
| `BCY` | BCY | Bank cubic yards of material moved |
| `DistanceM` | meters | Straight-line distance between cut and fill |
| `TripTimeSeconds` | seconds | Estimated trip duration |
| `TotalDistanceM` | meters | Total distance including all operations |
| `TotalCutBins` | count | Number of bins involved in cutting |
| `TotalFillBins` | count | Number of bins involved in filling |

## 6. Coordinate Systems

### 6.1 Geographic Coordinates
- **Latitude**: WGS84 decimal degrees (positive = North, negative = South)
- **Longitude**: WGS84 decimal degrees (positive = East, negative = West)
- **Precision**: 6 decimal places (approximately 0.1m accuracy)

### 6.2 Local Grid System
- **Origin**: Southwest corner of the field
- **Units**: Meters
- **Bin Size**: 0.6096m x 0.6096m (2ft x 2ft)
- **Indexing**: Zero-based (0,0) at southwest corner

## 7. Data Validation Rules

### 7.1 Equipment Parameters
- `SoilSwell` > 1.0 (soil expands when excavated)
- `SoilShrink` < 1.0 (soil compacts when deposited)
- `FieldEfficiency` between 0.0 and 1.0
- All speed values > 0

### 7.2 Spatial Data
- All coordinates within valid lat/lon ranges
- `BinSizeM` = 0.6096 (fixed 2ft x 2ft)
- `TotalBins` = `Width` × `Height`
- Bin indices within valid ranges

### 7.3 Trip Data
- `TripIndex` > 0 and sequential
- `HeadingDeg` between 0 and 360
- `DepthM` and `LengthM` > 0
- Cut and fill headings differ by approximately 180°

## 8. Usage Guidelines

### 8.1 Equipment Setup
Use equipment parameters to configure machinery for optimal performance.

### 8.2 Navigation
Use coordinate data for GPS navigation and equipment positioning.

### 8.3 Quality Control
Verify that cut/fill amounts match calculated volumes and profiles.

### 8.4 Safety
Ensure cut depths do not exceed equipment capabilities and safety limits.

## 9. File Format Notes

- **Encoding**: UTF-8
- **Line Endings**: Platform-specific (CRLF for Windows, LF for Unix)
- **Indentation**: 2 spaces per level
- **Comments**: XML comments allowed for documentation
- **Validation**: Well-formed XML required

## 10. Version History

| Version | Date | Changes |
|---------|------|---------|
| 1.0 | 2024 | Initial specification |

---

**Document End**
